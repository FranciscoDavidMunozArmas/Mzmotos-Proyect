<div class="container-fluid p-4">
    <div class="row">
        <div class="col-xl-8 fadeIn">
            <app-calendar (dateOutput)="setTodayAppointment($event)" [appointments]="appointmentDays"></app-calendar>
        </div>
        <div class="col-md">
            <div class="appointment-container fadeIn">
                <app-clock></app-clock>
                <div *ngIf="!showMore; else lessButton">
                    <a (click)="setShowMore()"><span class="fa fa-plus"></span> Mas</a>
                </div>
                <ng-template #lessButton>
                    <a (click)="setShowMore()"><span class=" fa fa-minus "></span> Menos</a>
                </ng-template>
                <hr>
                <div *ngIf="appointments ">
                    <div>{{selectedDay}}</div>
                    <div class="agenda-card mt-3 " *ngFor="let appointment of todayappointments">
                        <div *ngIf="!appointment.state || showMore">
                            <app-agenda-card [appointment]="appointment" (deleteEvent)="removeAppointment($event)" (updateEvent)="updateAppointement($event)"></app-agenda-card>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="float-right-bottom ">
    <div class="d-flex flex-column ">
        <app-float-button (eventFunction)="showSearchBox() " icon="fa fa-search "></app-float-button>
        <app-float-button (eventFunction)="showAllAppointmentsModal() " icon="fas fa-clipboard-list"></app-float-button>
        <app-float-button (eventFunction)="showSetAppointmentModal() "></app-float-button>
    </div>
</div>


<ng-template #setAppointment let-modal>
    <div class="card ">
        <div class="d-flex mb-3 ">
            <a class="btn close-btn " (click)="modalClose() "><span class="fa fa-times "></span></a>
        </div>
        <div class="card-body ">
            <app-appointment-form (saveEvent)="addAppointment($event) " (cancelEvent)="modalClose() "></app-appointment-form>
        </div>
    </div>
</ng-template>

<ng-template #searchBox let-modal>
    <div class="card ">
        <div class="d-flex mb-3 ">
            <a class="btn close-btn " (click)="modalClose() "><span class="fa fa-times "></span></a>
        </div>
        <div class="card-body ">
            <app-search (searchEvent)="search($event) " (cancelEvent)="modalClose() "></app-search>
        </div>
    </div>
</ng-template>

<ng-template #allAppointmentsModal let-modal>
    <div class="d-flex">
        <a class="btn close-btn " (click)="modalClose() "><span class="fa fa-times "></span></a>
    </div>
    <div class="container p-4">
        <div class="agenda-card mt-3 " *ngFor="let appointment of appointments">
            <app-agenda-card [appointment]="appointment" [disableDelete]="true" (updateEvent)="updateAppointement($event)"></app-agenda-card>
        </div>
    </div>
</ng-template>

<ng-template #resultAppointment let-modal>
    <div class="d-flex">
        <a class="btn close-btn " (click)="modalClose() "><span class="fa fa-times "></span></a>
    </div>
    <div class="container p-4" *ngIf="resultAppointments.length !== 0; else notfound">
        <div class="agenda-card mt-3 " *ngFor="let appointment of resultAppointments">
            <app-agenda-card [appointment]="appointment" [disableDelete]="true" (updateEvent)="updateAppointement($event)"></app-agenda-card>
        </div>
    </div>
    <ng-template #notfound>
        <div class="d-flex m-4">
            <h5>No se han encontrado resultados</h5>
        </div>
    </ng-template>
</ng-template>